(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{183:function(t,a,e){"use strict";e.r(a);var s=e(258),i=e(244),r=e(250),o=e(265),l=e(420),n=e(421),c=e(413),d=e(246),u=e(256),m=(e(7),{name:"Career",components:{Navbar:()=>e.e(3).then(e.bind(null,181))},props:["lang","id"],data:()=>({csrf:document.querySelector('meta[name="csrf-token"]').getAttribute("content"),updatePage:!1,form:[],lang_id:2,loading:!1}),created:function(){this.lang_id=Vue.ls.get("language",1);let t=this;Vue.ls.on("language",(function(a){t.lang_id=a}));for(let t=1;t<4;t++)Vue.set(this.form,t,{valid:!1,status:1,header:"",description:"",descriptionRules:[t=>!!t||"Description is required"],name:"",nameRules:[t=>!!t||"Name is required"],activeItem:t,errors:"",success:""})},methods:{setActive(t,a){var e={...this.form},s=this.lang_id;this.lang_id=a,Vue.ls.set("language",parseInt(a)),Array.from(this.$store.state.dataForm).find(t=>t.activeItem===a)?this.form=this.$store.state.dataForm:(this.form.name="",this.form.description="",this.form.location=""),this.updatePage&&s!==a&&this.$store.dispatch("singleCareer",{id:this.$route.params.id,lang_id:a}).then(()=>{let t=[];var e,s=this.careers;for(e in s.translates?t=s:(this.form[a].name="",this.form[a].description="",this.form[a].location=""),t)if(t[e])if("object"==typeof t[e])for(var i in t[e])t[e][i]&&(this.form[a][i]=t[e][i]);else this.form[a][e]=t[e],this.form[a].status=parseInt(t.status)}),this.$store.dispatch("dataForm",e)},isActive(t){return this.getRoute(this.$route.path)&&(this.updatePage=!0),parseInt(t)===parseInt(this.lang_id)},discard(){this.$refs.form.reset(),this.updatePage&&this.$store.dispatch("page",this.$route.params.pagination),this.$router.go(-1)},send(){let t=new FormData,a=!1;this.form.forEach((e,s)=>{e.name&&(t.append("file",e.file),t.append("data[]",JSON.stringify(e))),a=!0,e.name||s!==this.lang_id||(this.form[s].errors="Some fields needs to be completed",a=!1)}),a&&axios.post("/admin/careers/add",t).then(t=>{200!==t.status||t.data.error?this.form[this.lang_id].errors=t.data.error:(a=!1,this.$router.go(-1))})},update(){this.loading=!0,this.form.forEach((t,a)=>{var e;t.name?((e=new FormData).append("data",JSON.stringify(t)),axios.post("/admin/careers/"+this.$route.params.id,e).then(t=>{void 0!==this.form[a+1]&&this.form[a+1].name||(this.loading=!1,this.form[a].success="Updated successfully",setTimeout(()=>{this.form[a].success=""},3e3))})):t.name||a!==this.lang_id||(this.form[a].errors="Some fields needs to be completed")})},getRoute(t){var a=t.split("/").length;return"edit"===t.split("/")[a-1]}},mounted(){this.lang_id=2,this.$store.state.dataForm=[],this.updatePage&&this.$store.dispatch("singleCareer",{id:this.$route.params.id,lang_id:this.lang_id}).then(()=>{let t=[];for(var a in t=this.careers.id?this.careers:t)if(t[a])if("object"==typeof t[a])for(var e in t[a])t[a][e]&&(this.form[this.lang_id][e]=t[a][e]);else this.form[this.lang_id][a]=t[a]})},watch:{lang_id:function(t){Vue.ls.set("language",t)}},computed:{careers(){return this.$store.getters.getSingleCareer}}}),f=e(11);f=Object(f.a)(m,(function(){var t=this,a=t._self._c;return a("div",{attrs:{id:"add-item-page"}},[a("Navbar",{attrs:{tabs:[{Careers:"Careers","Add Job":"Add Job"}],heading:"Job","email-page":!0}}),t._v(" "),a(o.a,{ref:"form",staticClass:"add-news add-career",class:[t.loading?"loading-form":""],attrs:{method:"POST",enctype:"multipart/form-data"},model:{value:t.form.valid,callback:function(a){t.$set(t.form,"valid",a)},expression:"form.valid"}},[a("input",{attrs:{type:"hidden",name:"_token"},domProps:{value:t.csrf}}),t._v(" "),t.loading?a("div",{staticClass:"lds-dual-ring"}):t._e(),t._v(" "),a("div",[a("h4",{staticClass:"form-title"},[t._v(t._s(t.updatePage?"Edit Job":"Add Job"))]),t._v(" "),a("ul",{staticClass:"list-group-inline"},[a("li",{staticClass:"nav-item",attrs:{"data-id":"3"}},[a("a",{staticClass:"nav-link",class:{active:t.isActive(3)},attrs:{href:"#rus"},on:{click:function(a){return a.preventDefault(),t.setActive(a,3)}}},[t._v("RUS")])]),t._v(" "),a("li",{staticClass:"nav-item",attrs:{"data-id":"1"}},[a("a",{staticClass:"nav-link",class:{active:t.isActive(1)},attrs:{href:"#eng"},on:{click:function(a){return a.preventDefault(),t.setActive(a,1)}}},[t._v("ENG")])]),t._v(" "),a("li",{staticClass:"nav-item",attrs:{"data-id":"2"}},[a("a",{staticClass:"nav-link",class:{active:t.isActive(2)},attrs:{href:"#ro"},on:{click:function(a){return a.preventDefault(),t.setActive(a,2)}}},[t._v("RO")])])])]),t._v(" "),a("div",{staticClass:"tab-content py-3",attrs:{id:"addNewsTabs"}},[a("div",{staticClass:"tab-pane fade",class:{"active show":t.isActive(1)},attrs:{id:"eng"}},[a(r.a,[a(c.a,[a("h5",{staticClass:"row-title"},[t._v("Visibility")]),t._v(" "),a(i.a,{attrs:{cols:"12"}},[a(n.a,{attrs:{row:"",mandatory:""},model:{value:t.form[1].available,callback:function(a){t.$set(t.form[1],"available",a)},expression:"form[1].available"}},[a(l.a,{attrs:{color:"success",value:1,label:"Show"}}),t._v(" "),a(l.a,{attrs:{color:"success",value:0,label:"Hide"}})],1)],1)],1),t._v(" "),a(c.a,[a("h5",{staticClass:"row-title"},[t._v("Name")]),t._v(" "),a(i.a,{attrs:{cols:"12"}},[a(d.a,{attrs:{placeholder:"Name",required:"",rules:t.form[1].nameRules},model:{value:t.form[1].name,callback:function(a){t.$set(t.form[1],"name",a)},expression:"form[1].name"}})],1)],1),t._v(" "),a(c.a,[a(i.a,{attrs:{cols:"12"}},[a(d.a,{attrs:{placeholder:"Location",required:""},model:{value:t.form[1].location,callback:function(a){t.$set(t.form[1],"location",a)},expression:"form[1].location"}})],1)],1),t._v(" "),a(c.a,[a(i.a,{attrs:{cols:"12"}},[a(u.a,{attrs:{placeholder:"Job description",required:"",name:"text",rules:t.form[1].descriptionRules},model:{value:t.form[1].description,callback:function(a){t.$set(t.form[1],"description",a)},expression:"form[1].description"}})],1)],1),t._v(" "),a(c.a,{staticClass:"d-flex justify-content-end"},[a(s.a,{staticClass:"discard-form",attrs:{width:"auto"},on:{click:t.discard}},[t._v("\n                            Discard\n                        ")]),t._v(" "),t.updatePage?a(s.a,{staticClass:"submit-form",attrs:{width:"auto",right:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.update.apply(null,arguments)}}},[t._v("\n                            UPDATE\n                        ")]):a(s.a,{staticClass:"submit-form",attrs:{width:"auto",right:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.send.apply(null,arguments)}}},[t._v("\n                            SEND\n                        ")])],1),t._v(" "),a("input",{attrs:{type:"hidden"},domProps:{value:1}})],1)],1),t._v(" "),a("div",{staticClass:"tab-pane fade",class:{"active show":t.isActive(2)},attrs:{id:"ro"}},[a(r.a,[a(c.a,[a("h5",{staticClass:"row-title"},[t._v("Visibility")]),t._v(" "),a(i.a,{attrs:{cols:"12"}},[a(n.a,{attrs:{row:"",mandatory:""},model:{value:t.form[2].available,callback:function(a){t.$set(t.form[2],"available",a)},expression:"form[2].available"}},[a(l.a,{attrs:{color:"success",value:1,label:"Show"}}),t._v(" "),a(l.a,{attrs:{color:"success",value:0,label:"Hide"}})],1)],1)],1),t._v(" "),a(c.a,[a("h5",{staticClass:"row-title"},[t._v("Career")]),t._v(" "),a(i.a,{attrs:{cols:"12"}},[a(d.a,{attrs:{placeholder:"Name"},model:{value:t.form[2].name,callback:function(a){t.$set(t.form[2],"name",a)},expression:"form[2].name"}})],1)],1),t._v(" "),a(c.a,[a(i.a,{attrs:{cols:"12"}},[a(d.a,{attrs:{placeholder:"Location",required:""},model:{value:t.form[2].location,callback:function(a){t.$set(t.form[2],"location",a)},expression:"form[2].location"}})],1)],1),t._v(" "),a(c.a,[a(i.a,{attrs:{cols:"12"}},[a(u.a,{attrs:{placeholder:"Job description",required:"",name:"text"},model:{value:t.form[2].description,callback:function(a){t.$set(t.form[2],"description",a)},expression:"form[2].description"}})],1)],1),t._v(" "),a(c.a,{staticClass:"d-flex justify-content-end"},[a(s.a,{staticClass:"discard-form",attrs:{width:"auto"},on:{click:t.discard}},[t._v("\n                            Discard\n                        ")]),t._v(" "),t.updatePage?a(s.a,{staticClass:"submit-form",attrs:{width:"auto",right:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.update.apply(null,arguments)}}},[t._v("\n                            UPDATE\n                        ")]):a(s.a,{staticClass:"submit-form",attrs:{width:"auto",right:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.send.apply(null,arguments)}}},[t._v("\n                            SEND\n                        ")])],1),t._v(" "),a("input",{attrs:{type:"hidden"},domProps:{value:2}})],1)],1),t._v(" "),a("div",{staticClass:"tab-pane fade",class:{"active show":t.isActive(3)},attrs:{id:"rus"}},[a(r.a,[a(c.a,[a("h5",{staticClass:"row-title"},[t._v("Visibility")]),t._v(" "),a(i.a,{attrs:{cols:"12"}},[a(n.a,{attrs:{row:"",mandatory:""},model:{value:t.form[3].available,callback:function(a){t.$set(t.form[3],"available",a)},expression:"form[3].available"}},[a(l.a,{attrs:{color:"success",value:1,label:"Show"}}),t._v(" "),a(l.a,{attrs:{color:"success",value:0,label:"Hide"}})],1)],1)],1),t._v(" "),a(c.a,[a("h5",{staticClass:"row-title"},[t._v("Career")]),t._v(" "),a(i.a,{attrs:{cols:"12"}},[a(d.a,{attrs:{placeholder:"Name"},model:{value:t.form[3].name,callback:function(a){t.$set(t.form[3],"name",a)},expression:"form[3].name"}})],1)],1),t._v(" "),a(c.a,[a(i.a,{attrs:{cols:"12"}},[a(d.a,{attrs:{placeholder:"Location",required:""},model:{value:t.form[3].location,callback:function(a){t.$set(t.form[3],"location",a)},expression:"form[3].location"}})],1)],1),t._v(" "),a(c.a,[a(i.a,{attrs:{cols:"12"}},[a(u.a,{attrs:{placeholder:"Job description",required:"",name:"text"},model:{value:t.form[3].description,callback:function(a){t.$set(t.form[3],"description",a)},expression:"form[3].description"}})],1)],1),t._v(" "),a(c.a,{staticClass:"d-flex justify-content-end"},[a(s.a,{staticClass:"discard-form",attrs:{width:"auto"},on:{click:t.discard}},[t._v("\n                            Discard\n                        ")]),t._v(" "),t.updatePage?a(s.a,{staticClass:"submit-form",attrs:{width:"auto",right:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.update.apply(null,arguments)}}},[t._v("\n                            UPDATE\n                        ")]):a(s.a,{staticClass:"submit-form",attrs:{width:"auto",right:""},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.send.apply(null,arguments)}}},[t._v("\n                            SEND\n                        ")])],1),t._v(" "),a("input",{attrs:{type:"hidden"},domProps:{value:3}})],1)],1),t._v(" "),a("p",{staticClass:"text-center text-danger mt-3"},[t._v(t._s(t.form[t.lang_id].errors||""))]),t._v(" "),a("p",{staticClass:"text-center text-success mt-3"},[t._v(t._s(t.form[t.lang_id].success||""))])])])],1)}),[],!1,null,null,null);a.default=f.exports}}]);