(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{138:function(e,t,o){"use strict";function n(){var e=this,t=e._self._c;return t("div",[t("yandex-map",{staticStyle:{height:"500px","max-width":"100%",width:"100%"},attrs:{zoom:"7",coords:e.coords,controls:[],"scroll-zoom":!1},on:{"map-was-initialized":e.createdMap}},e._l(e.proj,(function(o,n){return e.proj?t("ymap-marker",{key:n+1,attrs:{coords:e.getCords(o.coords),"marker-id":n+1,"marker-type":"placemark",icon:e.getImage(o.type_id,o.ongoing),"balloon-template":e.mapItem(o,n)},on:{balloonopen:e.onBalloonOpen}}):e._e()})),1)],1)}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var o,n=t.options,r=t.callbacks,a=t.map,i=t.useObjectManager,s=t.objectManagerClusterize,c={},l=[];e.forEach((function(e){var t;e.clusterName?c[e.clusterName]=c[e.clusterName]?[].concat(function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(t=c[e.clusterName])||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}(),[e]):[e]:l.push(e)})),Object.keys(c).forEach((function(e){var t,o,l=n[e]||{},u=r[e]||{},p=l.layout||"\n      <div>{{ properties.balloonContentHeader }}</div>\n      <div>{{ properties.balloonContentBody }}</div>\n      <div>{{ properties.balloonContentFooter }}</div>\n    ";l.clusterBalloonItemContentLayout=ymaps.templateLayoutFactory.createClass(p),p=l.clusterBalloonLayout||l.clusterLayout,delete l.clusterBalloonLayout,p=p?ymaps.templateLayoutFactory.createClass(p):l.clusterBalloonContentLayout||"cluster#balloonTwoColumns",l.clusterBalloonContentLayout=p,p=l.clusterIconContentLayout;l.clusterIconContentLayout=p&&ymaps.templateLayoutFactory.createClass(p),i?(t=new ymaps.ObjectManager(Object.assign({clusterize:s},l)),Object.keys(u).forEach((function(e){t.clusters.events.add(e,u[e])})),t.add(c[e]),a.geoObjects.add(t)):(o=new ymaps.Clusterer(l),Object.keys(u).forEach((function(e){o.events.add(e,u[e])})),l.createCluster&&(o.createCluster=l.createCluster),o.add(c[e]),a.geoObjects.add(o))})),l.length&&(o=i?new ymaps.ObjectManager({clusterize:!1}):new ymaps.GeoObjectCollection,l.forEach((function(e){return o.add(e)})),a.geoObjects.add(o))}function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}o.r(t),n._withStripped=!0,function(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(l.prototype,[{key:"$on",value:function(e,t){var o=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){o.events[e]=o.events[e].filter((function(e){return t!==e}))}}},{key:"$emit",value:function(e,t){(e=this.events[e])&&e.forEach((function(e){return e(t)}))}}]);var s=new l,c=["fullscreenControl","geolocationControl","routeEditor","rulerControl","searchControl","trafficControl","typeSelector","zoomControl","routeButtonControl","routePanelControl"];function l(){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.events={},this.ymapReady=!1,this.scriptIsNotAttached=!0}function u(e){return 0===e.filter((function(e){return![].concat(c,["default"]).includes(e)})).length}var p=s,d=["actionend","balloonclose","balloonopen","click","contextmenu","dblclick","destroy","hintclose","hintopen","optionschange","sizechange","typechange"],m={pluginOptions:{},provide:function(){var e,t,o=this,n=[],a=[];return{useObjectManager:this.useObjectManager,addMarker:this.addMarker,deleteMarker:function(t){o.myMap.geoObjects&&(n.push(t),e&&clearTimeout(e),e=setTimeout((function(){o.deleteMarkers(n),n=[]}),0))},compareValues:function(e){var n,i=e.newVal,s=e.oldVal;e=e.marker;n=[],function e(t,o){if(t===o)return 1;if(t instanceof Date&&o instanceof Date)return+t==+o;if("object"===r(t)&&"object"===r(o)){if(function(e,t){for(var o=n.length;o--;)if(!(n[o][0]!==e&&n[o][0]!==t||n[o][1]!==t&&n[o][1]!==e))return 1}(t,o))return 1;n.push([t,o]);var a=Object.keys(t),i=a.length;if(Object.keys(o).length===i){for(;i--;)if(!e(t[a[i]],o[a[i]]))return;return 1}}}(i,s)||(a.push(e),t&&clearTimeout(t),t=setTimeout((function(){o.setMarkers(a),a=[]}),0))}}},data:function(){return{ymapId:"yandexMap".concat(Math.round(1e5*Math.random())),myMap:{},style:this.ymapClass?"":"width: 100%; height: 100%;",isReady:!1,debounce:null,markers:[]}},props:{coords:{type:Array,required:!0},zoom:{validator:function(e){return!Number.isNaN(e)},default:18},bounds:Array,clusterOptions:{type:Object,default:function(){return{}}},clusterCallbacks:{type:Object,default:function(){return{}}},behaviors:{type:Array,default:function(){return["default"]}},controls:{type:Array,default:function(){return["default"]},validator:u},detailedControls:{type:Object,validator:function(e){return u(Object.keys(e))}},scrollZoom:{type:Boolean,default:!0},mapType:{type:String,default:"map",validator:function(e){return["map","satellite","hybrid"].includes(e)}},placemarks:{type:Array,default:function(){return[]}},useObjectManager:{type:Boolean,default:!1},objectManagerClusterize:{type:Boolean,default:!0},ymapClass:String,initWithoutMarkers:{type:Boolean,default:!0},debug:{type:Boolean,default:!1},settings:{type:Object,default:function(){return{}}},options:{type:Object,default:function(){return{}}},showAllMarkers:Boolean,disablePan:Boolean},computed:{coordinates:function(){return this.coords.map((function(e){return+e}))}},methods:{init:function(){var e=this;window.ymaps&&ymaps.GeoObjectCollection&&(this.initWithoutMarkers||this.$slots.default||this.placemarks.length)&&(this.$emit("map-initialization-started"),this.myMap=new ymaps.Map(this.ymapId,{center:this.coordinates,zoom:+this.zoom,bounds:this.bounds,behaviors:this.behaviors,controls:this.controls,type:"yandex#".concat(this.mapType)},this.options),d.forEach((function(t){return e.myMap.events.add(t,(function(o){return e.$emit(t,o)}))})),this.myMap.events.add("boundschange",(function(t){var o=(r=t.originalEvent).newZoom,n=r.newCenter,r=r.newBounds;e.$emit("boundschange",t),e.$emit("update:zoom",o),e.$emit("update:coords",n),e.$emit("update:bounds",r)})),this.detailedControls&&Object.keys(this.detailedControls).forEach((function(t){e.myMap.controls.remove(t),e.myMap.controls.add(t,e.detailedControls[t])})),!1===this.scrollZoom&&this.myMap.behaviors.disable("scrollZoom"),this.isReady=!0,this.$emit("map-was-initialized",this.myMap))},addMarker:function(e){var t=this;this.markers.push(e),this.debounce&&clearTimeout(this.debounce),this.debounce=setTimeout((function(){t.setMarkers(t.markers)}),0)},setMarkers:function(e){var t,o=this,n={options:this.clusterOptions,callbacks:this.clusterCallbacks,map:this.myMap,useObjectManager:this.useObjectManager,objectManagerClusterize:this.objectManagerClusterize};this.markers!==e?(t=e.map((function(e){return o.useObjectManager?e.id:e.properties.get("markerId")})),this.deleteMarkers(t),a(e,n),this.$emit("markers-was-change",t)):a(e,n),this.markers=[],this.showAllMarkers&&this.myMap.setBounds(this.myMap.geoObjects.getBounds())},deleteMarkers:function(e){var t=this;this.myMap.geoObjects.each((function(o){var n,r,a,i=[];t.useObjectManager?o.remove(e):(r=function(t){var o=t.properties.get("markerId");e.includes(o)&&i.push(t)},o.each?(o.each(r),n=o.getLength()):o.getGeoObjects&&((a=o.getGeoObjects()).forEach(r),n=a.length),0===n||n===i.length?t.myMap.geoObjects.remove(o):i.length&&i.forEach((function(e){return o.remove(e)})))})),this.$emit("markers-was-delete",e)}},watch:{coordinates:function(e){this.disablePan?this.myMap.setCenter&&this.myMap.setCenter(e):this.myMap.panTo&&this.myMap.getZoom()&&this.myMap.panTo(e,{checkZoomRange:!0})},zoom:function(){this.myMap.setZoom(this.zoom)},bounds:function(e){this.myMap.setBounds&&this.myMap.setBounds(e)}},render:function(e){return e("section",{class:"ymap-container",ref:"mapContainer"},[e("div",{attrs:{id:this.ymapId,class:this.ymapClass,style:this.style}}),this.isReady&&e("div",{ref:"markersContainer",attrs:{class:"ymap-markers"}},[this.$slots.default])])},mounted:function(){var e=this;if(this.$attrs["map-link"]||this.$attrs.mapLink)throw new Error("Vue-yandex-maps: Attribute mapLink is not supported. Use settings.");if(this.placemarks&&this.placemarks.length)throw new Error("Vue-yandex-maps: Attribute placemarks is not supported. Use marker component.");this.mapObserver=new MutationObserver((function(){e.myMap.container&&e.myMap.container.fitToViewport()}));var t=this.$refs.mapContainer;this.mapObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!1}),p.scriptIsNotAttached&&(t=this.debug,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};new Promise((function(t,o){if(window.ymaps)return t();var n,r,a,i,c,l,u;document.getElementById("vue-yandex-maps")?s.$on("scriptIsLoaded",t):(n=document.createElement("SCRIPT"),u=void 0===(u=e.apiKey)?"":u,l=e.lang,r=void 0===(r=e.version)?"2.1":r,a=void 0===(a=e.coordorder)?"latlong":a,c=e.debug,i=void 0!==(i=e.enterprise)&&i,c=void 0!==c&&c?"debug":"release",l="lang=".concat(void 0===l?"ru_RU":l).concat(u&&"&apikey=".concat(u),"&mode=").concat(c,"&coordorder=").concat(a),u="https://".concat(i?"enterprise.":"","api-maps.yandex.ru/").concat(r,"/?").concat(l),n.setAttribute("src",u),n.setAttribute("async",""),n.setAttribute("defer",""),n.setAttribute("id","vue-yandex-maps"),document.head.appendChild(n),s.scriptIsNotAttached=!1,n.onload=function(){ymaps.ready((function(){s.ymapReady=!0,s.$emit("scriptIsLoaded"),t()}))},n.onerror=o)}))}(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},n=Object.keys(o);(n="function"==typeof Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))):n).forEach((function(t){var n,r;n=e,r=o[t=t],t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r}))}return e}({},this.$options.pluginOptions,this.settings,{debug:t}))),p.ymapReady?ymaps.ready(this.init):p.$on("scriptIsLoaded",(function(){ymaps.ready(e.init)}))},beforeDestroy:function(){this.myMap.geoObjects&&this.myMap.geoObjects.removeAll()}},h=["placemark","polyline","rectangle","polygon","circle"],y=["balloonclose","balloonopen","click","contextmenu","dblclick","drag","dragend","dragstart","hintclose","hintopen","mouseenter","mouseleave"],f={inject:["useObjectManager","addMarker","deleteMarker","compareValues"],props:{coords:Array,hintContent:String,icon:Object,balloon:Object,markerType:{type:String,validator:function(e){return h.includes(e.toLowerCase())},default:"placemark"},markerFill:Object,markerStroke:Object,clusterName:[String,Number],circleRadius:{validator:function(e){return!Number.isNaN(e)},default:1e3},balloonTemplate:String,markerId:{type:[String,Number],required:!0},properties:Object,options:Object},data:function(){return{unwatchArr:[]}},render:function(e){return this.$slots.balloon&&e("div",{style:"display: none;"},[this.$slots.balloon])},mounted:function(){var e=this;Object.keys(this.$props).forEach((function(t){e.unwatchArr.push(e.$watch(t,(function(t,o){return e.compareValues({newVal:t,oldVal:o,marker:e.defineMarker()})})))})),this.addMarker(this.defineMarker())},methods:{defineMarker:function(){var e=this,t={},o=(this.balloonTemplate&&(t={balloonContentLayout:ymaps.templateLayoutFactory.createClass(this.balloonTemplate)}),this.$slots.balloon&&(t={balloonContentLayout:ymaps.templateLayoutFactory.createClass(this.$slots.balloon[0].elm.outerHTML)}),{markerId:this.markerId,markerType:this.markerType||"placemark",coords:function e(t){return t.map((function(t){return Array.isArray(t)?e(t):+t}))}(this.coords),hintContent:this.hintContent,markerFill:this.markerFill,circleRadius:+this.circleRadius,clusterName:this.clusterName,markerStroke:this.markerStroke,balloon:this.balloon,properties:this.properties,options:this.options,balloonOptions:t}),n=(t=(this.icon&&["default#image","default#imageWithContent"].includes(this.icon.layout)?(o.iconContent=this.icon.content,o.iconLayout=this.icon.layout,o.iconImageHref=this.icon.imageHref,o.iconImageSize=this.icon.imageSize,o.iconImageOffset=this.icon.imageOffset,o.iconContentOffset=this.icon.contentOffset,this.icon.contentLayout&&"string"==typeof this.icon.contentLayout&&(o.iconContentLayout=ymaps.templateLayoutFactory.createClass(this.icon.contentLayout))):o.icon=this.icon,function(e){var t=i(o.markerType);if(!e)return t;switch(t){case"Placemark":return"Point";case"Polyline":return"LineString";default:return t}}(this.useObjectManager)),{hintContent:o.hintContent,iconContent:o.icon?o.icon.content:o.iconContent,markerId:o.markerId}),r=o.balloon?{balloonContentHeader:o.balloon.header,balloonContentBody:o.balloon.body,balloonContentFooter:o.balloon.footer}:{},a=(n=Object.assign(n,r,o.properties),r=o.iconLayout?{iconLayout:o.iconLayout,iconImageHref:o.iconImageHref,iconImageSize:o.iconImageSize,iconImageOffset:o.iconImageOffset,iconContentOffset:o.iconContentOffset,iconContentLayout:o.iconContentLayout}:{preset:o.icon&&"islands#".concat(((r=o).icon.color||"blue")+(r.icon.glyph?i(r.icon.glyph):r.icon.content?"Stretchy":""),"Icon")},o.markerStroke?{strokeColor:o.markerStroke.color||"0066ffff",strokeOpacity:0<=parseFloat(o.markerStroke.opacity)?parseFloat(o.markerStroke.opacity):1,strokeStyle:o.markerStroke.style,strokeWidth:0<=parseFloat(o.markerStroke.width)?parseFloat(o.markerStroke.width):1}:{}),s=o.markerFill?{fill:o.markerFill.enabled||!0,fillColor:o.markerFill.color||"0066ff99",fillOpacity:0<=parseFloat(o.markerFill.opacity)?parseFloat(o.markerFill.opacity):1,fillImageHref:o.markerFill.imageHref||""}:{},c=(r=Object.assign(r,a,s,o.balloonOptions,o.options),"Circle"===t&&(o.coords=[o.coords,o.circleRadius]),function(e,t){return(t=t?{type:"Feature",id:e.properties.markerId,geometry:{type:e.markerType,coordinates:e.coords},properties:e.properties,options:e.options}:new ymaps[e.markerType](e.coords,e.properties,e.options)).clusterName=e.clusterName,t}({properties:n,options:r,markerType:t,coords:o.coords,clusterName:o.clusterName},this.useObjectManager,this.$emit));return this.useObjectManager||y.forEach((function(t){return c.events.add(t,(function(o){return e.$emit(t,o)}))})),c}},beforeDestroy:function(){this.unwatchArr.forEach((function(e){return e()})),this.deleteMarker(this.markerId)}},b=(m.install=function e(t){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.installed||(e.installed=!0,m.pluginOptions=o,t.component("yandex-map",m),t.component("ymap-marker",f))},"undefined"!=typeof window&&window.Vue&&window.Vue.use(m),m),g=f,k=o(1);b={name:"Map",components:{yandexMap:b,ymapMarker:g},props:[],data(){return{language:"en"===this.$route.params.locale?1:"ru"===this.$route.params.locale?3:2,coords:[47.041783,28.883513],settings:{apiKey:"c9f663ad-b0ef-42ab-8700-235248261fc5",coordorder:"latlong",version:"2.1"},items:[],proj:[],myMap:{},layout:"<div>{{ properties.balloonContentHeader }}</div><div>{{ properties.balloonContentBody }}</div><div>{{ properties.balloonContentFooter }}</div>"}},mounted(){},created(){this.$store.dispatch("projects",{lang:"en"===this.$router.currentRoute.params.locale?1:"ru"===this.$router.currentRoute.params.locale?3:2}).then(()=>{this.proj=this.$store.getters.getProjects})},computed:{projects(){return this.$store.getters.getProjects},small:()=>k.a.data.small,xsmall:()=>k.a.data.xsmall,medium:()=>k.a.data.medium,large:()=>k.a.data.large,xlarge:()=>k.a.data.xlarge},methods:{getImage(e,t){var o="/assets/icons/map/",n={layout:"default#imageWithContent",imageHref:"",imageSize:[30,30],imageOffset:[0,0]};if(t)n.imageHref+=o+"full-outline.png";else switch(e){case 1:n.imageHref+=o+"semi-gray.png";break;case 2:n.imageHref+=o+"gray.png";break;case 3:n.imageHref+=o+"full.png"}return n},getCords:e=>e.split(","),mapItem(e,t){if(e.projects)return`<div :class="card">\n                                <img class="card-img-top" src="/${e.image}" alt="" style="height: auto;max-height: 160px;width: 100%;object-fit: cover;object-position: center;"/>\n                                <div class="card-body">\n                                    <h4 class="before-border">${e.projects.name}</h4>\n                                    <p class="project-description" style="margin: 15px 0 !important;overflow: hidden;text-overflow: ellipsis;max-width: 100%;max-height: 50px;">${e.projects.description}</p>\n                                    <div class="card-project-features d-flex">\n                                        <div class="mr-5">\n                                            <i class="margin-icon">\n                                                <img src="/assets/icons/location-grey.png">\n                                            </i>\n                                            ${e.projects.location}\n                                        </div>\n                                        <div class="font-number project-power"><i class="margin-icon"><img\n                                            src="/assets/icons/light-grey.png"></i>${e.power} ${this.$t("power")}\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>`},increaseOpacity(){var e=10*this.optionsB.opacity;this.optionsB.opacity=Math.round(9<e?5:1+e)/10},updatePosition(e){this.position=e},createdMap(e){this.myMap=e},onBalloonOpen(){if(this.xsmall){let e=this,t=document.getElementsByClassName("ymaps-2-1-79-balloon");setTimeout((function(){var o,n;t.length&&0<t[0].getBoundingClientRect().left&&(o=e.myMap.getGlobalPixelCenter(),n=t[0].getBoundingClientRect().left,o[0]+=n,n=e.myMap.options.get("projection").fromGlobalPixels(o,e.myMap.getZoom()),e.myMap.setCenter(n,e.myMap.getZoom(),{duration:100}))}),600)}}}},g=o(11),o=Object(g.a)(b,n,[],!1,null,"370330d4",null);t.default=o.exports}}]);