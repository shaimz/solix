(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{152:function(t,e,s){"use strict";s.r(e);var i=s(1),a=s(6),o={name:"allProjects",props:["lang","show"],components:{InfiniteLoading:()=>s.e(32).then(s.t.bind(null,415,7))},data(){return{language:"en"===this.$route.params.locale?1:"ru"===this.$route.params.locale?3:2,projects:[],active:"all",itemsToShow:4,total:0,toShow:this.show,render:!1,loading:!1,text:"",tabs:[],page:1,infiniteId:+new Date,visible:!0,permission:!1,type:0}},computed:{data(){return this.$store.getters.getProjects},large:()=>i.a.data.large,small:()=>i.a.data.small,xsmall:()=>i.a.data.xsmall,infinite:()=>i.a.data.largeCompare,medium:()=>i.a.data.medium,mediumCompare:()=>i.a.data.mediumCompare,xlarge:()=>i.a.data.xlarge,windowWidth:()=>i.a.data.innerWidth,typeId(){return this.$store.getters.getType}},methods:{infiniteHandler(t){this.xlarge&&setTimeout(()=>{$(".infinite-loading-container").show(),this.$store.dispatch("projects",{lang:this.language||0,limit:this.show||0,offset:this.itemsToShow,type:this.type}).then(()=>{let e=this.data;e.length?(this.itemsToShow+=this.show,this.page+=1,e.forEach(t=>{this.projects.push(t)}),this.permission=!0,t.loaded()):(t.complete(),$(".infinite-loading-container").hide())})},1500)},addItem(t){this.text=t.text,this.$nextTick(()=>{this.active=t.tab})},addItemsToShow(){this.itemsToShow+=this.show,this.$store.dispatch("projects",{lang:this.language||0,limit:this.show||0,offset:this.itemsToShow-this.show?this.itemsToShow-this.show:0}).then(()=>{let t=this.data;t.length?(t.forEach(t=>{this.projects.push(t)}),this.visible=t.length>=this.show):this.visible=!1})},projectSort(t,e){let s=[],i=["Частные лица","Persoane fizice","Individuals"],a=["Для бизнеса","For business","Pentru afaceri"],o=["Госучереждения","Instituții de stat","State institutions"];switch(e){case"all":return t;case"person":s=t.map(t=>i.includes(t.projects.type)?t:"");break;case"business":s=t.map(t=>a.includes(t.projects.type)?t:"");break;case"juridic":s=t.map(t=>o.includes(t.projects.type)?t:"");break;default:s=[]}return s.filter(t=>t)},itemSort(t,e){let s=[];var i;switch(e){case"all":return t.filter(t=>t.projects);case"person":s=t.map(t=>2===t.type_id?t:"").filter(t=>t.projects);break;case"business":s=t.map(t=>3===t.type_id?t:"").filter(t=>t.projects);break;case"juridic":s=t.map(t=>1===t.type_id?t:"").filter(t=>t.projects);break;default:s=[]}return(i=s.filter(t=>t)).length||(this.total=0),i},setActive(t,e=0){this.page=1,this.type=e,this.list=[],this.infiniteId+=1,this.itemsToShow=this.show,this.fetchData(e),this.$store.dispatch("type",e),t!==this.active&&(this.active=t,this.itemsToShow=this.show,this.visible=!0,this.render=!1,a.a.$emit("render",!1),a.a.$emit("tabchange",!0),this.getTotalByType(e))},isOdd:t=>t%2==0,renderRow(t){let e=[],s=0,i=2;if(1<t.length)for(;1<=t.slice(s,i).length;)e.push(t.slice(s,i)),s+=2,i+=2;else for(;1<=t.slice(s,i).length;)e.push(t.slice(s,i)),s+=1,i+=2;return e},fetchData(t=null){this.$store.dispatch("projects",{lang:this.language,limit:this.show,offset:this.itemsToShow-this.show,type:t}).then(()=>{this.projects=this.data,this.itemsToShow=this.show,this.permission=!0,this.visible=this.projects.length})},getCount(){axios.get("/get-total",{params:{lang:this.language,type:"projects"}}).then(t=>{this.total=t.data})},getTotalByType(t){axios.get("/get-bytype",{params:{lang:this.language,type:"projects",typeId:t}}).then(t=>{this.total=t.data})},fetchList(t){let e=[];for(var s in t)t[s].text&&e.push({id:t[s].id,value:t[s].text});return e},getTab(t){var e,s=this.$t("home.projects.filter");for(e in s)if(s[e].text===t.value)return s[e].tab},initialisePicker(){setTimeout(()=>{if(document.querySelector("#trigger1")){let t=this,e=this;new MobileSelect({trigger:"#trigger1",title:"",wheels:[{data:this.fetchList(this.$t("home.projects.filter"))}],cancelBtnText:this.$t("cancel"),ensureBtnText:this.$t("select"),jsonType:!0,position:[0],transitionEnd:function(t,e){},onShow:t=>{},callback:function(s,i){i=i[0],e.active=t.getTab(i),e.text=i.value,e.$store.dispatch("type",i.id)}})}},800)}},created(){this.$store.dispatch("projects",{lang:this.language,limit:this.show,offset:0}).then(()=>{this.projects=this.data,this.total=this.projects.length,this.itemsToShow=this.show})},mounted(){this.type=this.typeId,this.$t("home.projects.filter").forEach((t,e)=>{this.type===t.id&&(this.active=t.tab,this.text=t.text)}),this.render=!0,setTimeout(()=>{a.a.$emit("render",!0)},200),this.initialisePicker(),this.getCount(),this.permission=!0},watch:{language(t,e){e!==t&&(this.language=t)},itemsToShow(t,e){t!==e&&4<t&&this.xsmall&&(this.visible=!1)},mediumCompare(t,e){},small(t,e){e!==t&&(t?(this.render=!0,setTimeout(()=>{a.a.$emit("render",!0)},500)):(this.render=!1,a.a.$emit("render",!1)))},projects(t,e){t!==e&&(this.total=t.length)},active(t,e){t!==e&&(this.render=!0,setTimeout(()=>{a.a.$emit("render",!0)},1e3))},toShow(t,e){t!==e&&(this.itemsToShow=t)},xsmall(t,e){t!==e&&(t?(setTimeout(()=>{this.permission=!0},300),this.initialisePicker()):this.permission=!1)},medium(t,e){}}},l=s(10);o=Object(l.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"d-flex justify-content-center col-lg-11 col-xl-7 col-md-11 mx-auto py-0 position-unset pl-0"},[s("div",{staticClass:"col-md-12 p-0 d-xs-block d-xlarge-flex border-left-section position-unset"},[s("div",{staticClass:"nav nav-pills me-3 col-xl-2 col-11 px-0 flex-lg-column flex-row flex-xlarge-column",attrs:{id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"}},[t._l(t.$t("home.projects.filter"),(function(e){return t.small&&!t.xsmall||t.medium||t.large?s("button",{class:["nav-link",t.active===e.tab?"active":""],attrs:{id:"v-pills-home-"+e.tab,"data-bs-toggle":"pill","data-bs-target":"#"+e.tab,type:"button",role:"tab","aria-controls":"v-pills-home","aria-selected":"true"},on:{click:function(s){return t.setActive(e.tab,e.id)}},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._v("\n                    "+t._s(e.text)+"\n                ")]):t._e()})),t._v(" "),t.xsmall?s("ul",[s("li",{staticClass:"nav-item dropdown"},[s("a",{staticClass:"nav-link dropdown-toggle",attrs:{id:"trigger1",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},on:{click:function(t){t.preventDefault()}}},[t._v(t._s(t.text||t.$t("home.projects.filter")[0].text))])])]):t._e()],2),t._v(" "),s("div",{key:t.active,staticClass:"tab-content col-xl-10 col-12 pr-0",attrs:{id:"v-pills-tabContent"}},[t._l(t.$t("home.projects.filter"),(function(e){return t.xsmall||!t.small&&!t.xsmall||t.small&&t.$route.path.includes("projects")?s("div",{class:["tab-pane","fade",e.tab===t.active?"show active":""],attrs:{id:e.tab,role:"tabpanel","aria-labelledby":"v-pills-home-tab"}},t._l(t.itemsToShow/2,(function(e){return e<=t.itemsToShow&&t.permission?s("div",{key:e,staticClass:"d-flex justify-content-lg-between justify-content-center flex-wrap row mb-10"},t._l(t.renderRow(t.itemSort(t.projects,t.active))[e-1],(function(i,a){return i.projects.name?s("router-link",{key:"card-num-"+a,class:["card",t.isOdd(e)&&t.isOdd(a)?"col-lg-5 col-11 ml-lg-9":t.isOdd(e)||t.isOdd(a)?t.isOdd(e)&&!t.isOdd(a)?"col-lg-6 col-11":!t.isOdd(e)&&t.isOdd(a)?"col-lg-6 col-11 ml-lg-9":"col-lg-5 col-11":"col-lg-5 col-11"],attrs:{to:{name:"project",params:{locale:t.$route.params.locale,id:i.id}}}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/"+i.image,expression:"'/'+card.image"}],staticClass:"card-img-top",attrs:{alt:""}}),t._v(" "),s("div",{staticClass:"card-body"},[s("h4",{staticClass:"before-border"},[t._v(t._s(i.projects.name))]),t._v(" "),s("p",{staticClass:"project-description"},[t._v(t._s(i.projects.description))]),t._v(" "),s("div",{staticClass:"card-project-features d-flex"},[s("div",{staticClass:"mr-5"},[s("i",{staticClass:"margin-icon"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/icons/location-grey.png",expression:"'/assets/icons/location-grey.png'"}]})]),t._v(t._s(i.projects.location)+"\n                                    ")]),t._v(" "),s("div",{staticClass:"font-number project-power"},[s("i",{staticClass:"margin-icon"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/icons/light-grey.png",expression:"'/assets/icons/light-grey.png'"}]})]),t._v(t._s(i.power)+" "+t._s(t.$t("power"))+"\n                                    ")])])]),t._v(" "),s("router-link",{staticClass:"btn-secondary project-more d-flex justify-content-evenly",attrs:{to:"projects/"+i.id}},[s("span",[t._v(t._s(t.$t("more")))]),s("i",{staticClass:"arrow right ml-2"})])],1):t._e()})),1):t._e()})),0):t.$route.path.includes("projects")||!t.small||t.xsmall?t._e():s("div",{class:["tab-pane","fade",e.tab===t.active?"show active":""],attrs:{id:e.tab,role:"tabpanel","aria-labelledby":"v-pills-home-tab"}},[t.render?s("div",{staticClass:"project-slick"},t._l(t.projectSort(t.projects,t.active),(function(e,i){return s("router-link",{key:"card-"+i,class:["card","col-lg-5 col-11"],attrs:{to:{name:"project",params:{locale:t.$route.params.locale,id:e.id}}}},[s("img",{staticClass:"card-img-top",attrs:{src:"/"+e.image,alt:""}}),t._v(" "),s("div",{staticClass:"card-body"},[s("h4",{staticClass:"before-border"},[t._v(t._s(e.projects.name))]),t._v(" "),s("p",{staticClass:"project-description"},[t._v(t._s(e.projects.description))]),t._v(" "),s("div",{staticClass:"card-project-features d-flex"},[s("div",{staticClass:"mr-5"},[s("i",{staticClass:"margin-icon"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/icons/location-grey.png",expression:"'/assets/icons/location-grey.png'"}]})]),t._v(t._s(e.projects.location)+"\n                                    ")]),t._v(" "),s("div",{staticClass:"font-number project-power"},[s("i",{staticClass:"margin-icon"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/icons/light-grey.png",expression:"'/assets/icons/light-grey.png'"}]})]),t._v(t._s(e.power)+" "+t._s(t.$t("power"))+"\n                                    ")])])]),t._v(" "),s("router-link",{staticClass:"btn-secondary project-more d-flex justify-content-evenly",attrs:{to:"projects/"+e.id}},[s("span",[t._v(t._s(t.$t("more")))]),t._v(" "),s("i",{staticClass:"arrow right ml-2"})])],1)})),1):t._e()])})),t._v(" "),s("div",{staticClass:"col-md-12 ml-xlarge-8 justify-content-center d-flex"},[t.visible&&(t.large||t.infinite||t.xsmall)&&t.itemsToShow<=t.total&&!t.$route.path.includes("projects")&&!t.small?s("button",{staticClass:"btn-primary text-center d-flex m-auto",on:{click:t.addItemsToShow}},[t._v("\n                        "+t._s(t.$t("load"))+"\n                    ")]):t._e(),t._v(" "),t.small&&!t.xsmall&&t.visible&&!t.$route.path.includes("projects")?s("router-link",{staticClass:"btn-primary text-center",attrs:{to:{name:"projects",params:{locale:t.$route.params.locale}}}},[t._v("\n                        "+t._s(t.$t("load"))+"\n                    ")]):t._e()],1)],2)])]),t._v(" "),t.renderRow(t.itemSort(t.projects,t.active)).length&&(t.xsmall||t.small||t.large)&&t.$route.path.includes("projects")?s("infinite-loading",{key:t.active,staticClass:"col-7",attrs:{identifier:t.infiniteId},on:{infinite:t.infiniteHandler}},[s("div",{attrs:{slot:"spinner"},slot:"spinner"},[s("div",{staticClass:"m-auto loading-more"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/icons/more.png",expression:"'/assets/icons/more.png'"}]})])]),t._v(" "),s("div",{attrs:{slot:"no-more"},slot:"no-more"}),t._v(" "),s("div",{attrs:{slot:"no-results"},slot:"no-results"})]):t._e()],1)}),[],!1,null,"b2b61464",null);e.default=o.exports}}]);