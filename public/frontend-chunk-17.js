(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{155:function(t,e,s){"use strict";function i(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"d-flex justify-content-center col-lg-11 col-xl-7 col-md-11 mx-auto py-0 position-unset pl-0"},[e("div",{staticClass:"col-md-12 p-0 d-xs-block d-xlarge-flex border-left-section position-unset"},[e("div",{staticClass:"nav nav-pills me-3 col-xl-2 col-11 px-0 flex-lg-column flex-row flex-xlarge-column",attrs:{id:"v-pills-tab",role:"tablist","aria-orientation":"vertical"}},[t._l(t.$t("home.projects.filter"),(function(s){return t.small&&!t.xsmall||t.medium||t.large?e("button",{class:["nav-link",t.active===s.tab?"active":""],attrs:{id:"v-pills-home-"+s.tab,"data-bs-toggle":"pill","data-bs-target":"#"+s.tab,type:"button",role:"tab","aria-controls":"v-pills-home","aria-selected":"true"},on:{click:function(e){return t.setActive(s.tab,s.id)}},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._v("\n                    "+t._s(s.text)+"\n                ")]):t._e()})),t._v(" "),t.xsmall?e("ul",[e("li",{staticClass:"nav-item dropdown"},[e("a",{staticClass:"nav-link dropdown-toggle",attrs:{id:"trigger1",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"},on:{click:function(t){t.preventDefault()}}},[t._v(t._s(t.text||t.$t("home.projects.filter")[0].text))])])]):t._e()],2),t._v(" "),e("div",{key:t.active,staticClass:"tab-content col-xl-10 col-12 pr-0",attrs:{id:"v-pills-tabContent"}},[t._l(t.$t("home.projects.filter"),(function(s){return t.xsmall||!t.small&&!t.xsmall||t.small&&t.$route.path.includes("projects")?e("div",{class:["tab-pane","fade",s.tab===t.active?"show active":""],attrs:{id:s.tab,role:"tabpanel","aria-labelledby":"v-pills-home-tab"}},t._l(t.itemsToShow/2,(function(s){return s<=t.itemsToShow&&t.permission?e("div",{key:s,staticClass:"d-flex justify-content-lg-between justify-content-center flex-wrap row mb-10"},t._l(t.renderRow(t.itemSort(t.projects,t.active))[s-1],(function(i,a){return i.projects.name?e("router-link",{key:"card-num-"+a,class:["card",t.isOdd(s)&&t.isOdd(a)?"col-lg-5 col-11 ml-lg-9":t.isOdd(s)||t.isOdd(a)?t.isOdd(s)&&!t.isOdd(a)?"col-lg-6 col-11":!t.isOdd(s)&&t.isOdd(a)?"col-lg-6 col-11 ml-lg-9":"col-lg-5 col-11":"col-lg-5 col-11"],attrs:{to:{name:"project",params:{locale:t.$route.params.locale,id:i.id}}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/"+i.image,expression:"'/'+card.image"}],staticClass:"card-img-top",attrs:{alt:""}}),t._v(" "),e("div",{staticClass:"card-body"},[e("h4",{staticClass:"before-border"},[t._v(t._s(i.projects.name))]),t._v(" "),e("p",{staticClass:"project-description"},[t._v(t._s(i.projects.description))]),t._v(" "),e("div",{staticClass:"card-project-features d-flex"},[e("div",{staticClass:"mr-5"},[e("i",{staticClass:"margin-icon"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/icons/location-grey.png",expression:"'/assets/icons/location-grey.png'"}]})]),t._v(t._s(i.projects.location)+"\n                                    ")]),t._v(" "),e("div",{staticClass:"font-number project-power"},[e("i",{staticClass:"margin-icon"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/icons/light-grey.png",expression:"'/assets/icons/light-grey.png'"}]})]),t._v(t._s(i.power)+" "+t._s(t.$t("power"))+"\n                                    ")])])]),t._v(" "),e("router-link",{staticClass:"btn-secondary project-more d-flex justify-content-evenly",attrs:{to:"projects/"+i.id}},[e("span",[t._v(t._s(t.$t("more")))]),e("i",{staticClass:"arrow right ml-2"})])],1):t._e()})),1):t._e()})),0):t.$route.path.includes("projects")||!t.small||t.xsmall?t._e():e("div",{class:["tab-pane","fade",s.tab===t.active?"show active":""],attrs:{id:s.tab,role:"tabpanel","aria-labelledby":"v-pills-home-tab"}},[t.render?e("div",{staticClass:"project-slick"},t._l(t.projectSort(t.projects,t.active),(function(s,i){return e("router-link",{key:"card-"+i,class:["card","col-lg-5 col-11"],attrs:{to:{name:"project",params:{locale:t.$route.params.locale,id:s.id}}}},[e("img",{staticClass:"card-img-top",attrs:{src:"/"+s.image,alt:""}}),t._v(" "),e("div",{staticClass:"card-body"},[e("h4",{staticClass:"before-border"},[t._v(t._s(s.projects.name))]),t._v(" "),e("p",{staticClass:"project-description"},[t._v(t._s(s.projects.description))]),t._v(" "),e("div",{staticClass:"card-project-features d-flex"},[e("div",{staticClass:"mr-5"},[e("i",{staticClass:"margin-icon"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/icons/location-grey.png",expression:"'/assets/icons/location-grey.png'"}]})]),t._v(t._s(s.projects.location)+"\n                                    ")]),t._v(" "),e("div",{staticClass:"font-number project-power"},[e("i",{staticClass:"margin-icon"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/icons/light-grey.png",expression:"'/assets/icons/light-grey.png'"}]})]),t._v(t._s(s.power)+" "+t._s(t.$t("power"))+"\n                                    ")])])]),t._v(" "),e("router-link",{staticClass:"btn-secondary project-more d-flex justify-content-evenly",attrs:{to:"projects/"+s.id}},[e("span",[t._v(t._s(t.$t("more")))]),t._v(" "),e("i",{staticClass:"arrow right ml-2"})])],1)})),1):t._e()])})),t._v(" "),e("div",{staticClass:"col-md-12 ml-xlarge-8 justify-content-center d-flex"},[t.visible&&(t.large||t.infinite||t.xsmall)&&t.itemsToShow<=t.total&&!t.$route.path.includes("projects")&&!t.small?e("button",{staticClass:"btn-primary text-center d-flex m-auto",on:{click:t.addItemsToShow}},[t._v("\n                        "+t._s(t.$t("load"))+"\n                    ")]):t._e(),t._v(" "),t.small&&!t.xsmall&&t.visible&&!t.$route.path.includes("projects")?e("router-link",{staticClass:"btn-primary text-center",attrs:{to:{name:"projects",params:{locale:t.$route.params.locale}}}},[t._v("\n                        "+t._s(t.$t("load"))+"\n                    ")]):t._e()],1)],2)])]),t._v(" "),t.renderRow(t.itemSort(t.projects,t.active)).length&&(t.xsmall||t.small||t.large)&&t.$route.path.includes("projects")?e("infinite-loading",{key:t.active,staticClass:"col-7",attrs:{identifier:t.infiniteId},on:{infinite:t.infiniteHandler}},[e("div",{attrs:{slot:"spinner"},slot:"spinner"},[e("div",{staticClass:"m-auto loading-more"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/icons/more.png",expression:"'/assets/icons/more.png'"}]})])]),t._v(" "),e("div",{attrs:{slot:"no-more"},slot:"no-more"}),t._v(" "),e("div",{attrs:{slot:"no-results"},slot:"no-results"})]):t._e()],1)}s.r(e),i._withStripped=!0;var a=s(1),o=s(7),r={name:"allProjects",props:["lang","show"],components:{InfiniteLoading:()=>s.e(31).then(s.t.bind(null,416,7))},data(){return{language:"en"===this.$route.params.locale?1:"ru"===this.$route.params.locale?3:2,projects:[],active:"all",itemsToShow:4,total:0,toShow:this.show,render:!1,loading:!1,text:"",tabs:[],page:1,infiniteId:+new Date,visible:!0,permission:!1,type:0}},computed:{data(){return this.$store.getters.getProjects},large:()=>a.a.data.large,small:()=>a.a.data.small,xsmall:()=>a.a.data.xsmall,infinite:()=>a.a.data.largeCompare,medium:()=>a.a.data.medium,mediumCompare:()=>a.a.data.mediumCompare,xlarge:()=>a.a.data.xlarge,windowWidth:()=>a.a.data.innerWidth,typeId(){return this.$store.getters.getType}},methods:{infiniteHandler(t){this.xlarge&&setTimeout(()=>{$(".infinite-loading-container").show(),this.$store.dispatch("projects",{lang:this.language||0,limit:this.show||0,offset:this.itemsToShow,type:this.type}).then(()=>{var e=this.data;e.length?(this.itemsToShow+=this.show,this.page+=1,e.forEach(t=>{this.projects.push(t)}),this.permission=!0,t.loaded()):(t.complete(),$(".infinite-loading-container").hide())})},1500)},addItem(t){this.text=t.text,this.$nextTick(()=>{this.active=t.tab})},addItemsToShow(){this.itemsToShow+=this.show,this.$store.dispatch("projects",{lang:this.language||0,limit:this.show||0,offset:this.itemsToShow-this.show?this.itemsToShow-this.show:0}).then(()=>{var t=this.data;t.length?(t.forEach(t=>{this.projects.push(t)}),this.visible=t.length>=this.show):this.visible=!1})},projectSort(t,e){let s=[],i=["Частные лица","Persoane fizice","Individuals"],a=["Для бизнеса","For business","Pentru afaceri"],o=["Госучереждения","Instituții de stat","State institutions"];switch(e){case"all":return t;case"person":s=t.map(t=>i.includes(t.projects.type)?t:"");break;case"business":s=t.map(t=>a.includes(t.projects.type)?t:"");break;case"juridic":s=t.map(t=>o.includes(t.projects.type)?t:"");break;default:s=[]}return s.filter(t=>t)},itemSort(t,e){let s=[];switch(e){case"all":return t.filter(t=>t.projects);case"person":s=t.map(t=>2===t.type_id?t:"").filter(t=>t.projects);break;case"business":s=t.map(t=>3===t.type_id?t:"").filter(t=>t.projects);break;case"juridic":s=t.map(t=>1===t.type_id?t:"").filter(t=>t.projects);break;default:s=[]}return(e=s.filter(t=>t)).length||(this.total=0),e},setActive(t,e=0){this.page=1,this.type=e,this.list=[],this.infiniteId+=1,this.itemsToShow=this.show,this.fetchData(e),this.$store.dispatch("type",e),t!==this.active&&(this.active=t,this.itemsToShow=this.show,this.visible=!0,this.render=!1,o.a.$emit("render",!1),o.a.$emit("tabchange",!0),this.getTotalByType(e))},isOdd:t=>t%2==0,renderRow(t){var e=[];let s=0,i=2;if(1<t.length)for(;1<=t.slice(s,i).length;)e.push(t.slice(s,i)),s+=2,i+=2;else for(;1<=t.slice(s,i).length;)e.push(t.slice(s,i)),s+=1,i+=2;return e},fetchData(t=null){this.$store.dispatch("projects",{lang:this.language,limit:this.show,offset:this.itemsToShow-this.show,type:t}).then(()=>{this.projects=this.data,this.itemsToShow=this.show,this.permission=!0,this.visible=this.projects.length})},getCount(){axios.get("/get-total",{params:{lang:this.language,type:"projects"}}).then(t=>{this.total=t.data})},getTotalByType(t){axios.get("/get-bytype",{params:{lang:this.language,type:"projects",typeId:t}}).then(t=>{this.total=t.data})},fetchList(t){var e,s=[];for(e in t)t[e].text&&s.push({id:t[e].id,value:t[e].text});return s},getTab(t){var e,s=this.$t("home.projects.filter");for(e in s)if(s[e].text===t.value)return s[e].tab},initialisePicker(){setTimeout(()=>{if(document.querySelector("#trigger1")){let t=this,e=this;new MobileSelect({trigger:"#trigger1",title:"",wheels:[{data:this.fetchList(this.$t("home.projects.filter"))}],cancelBtnText:this.$t("cancel"),ensureBtnText:this.$t("select"),jsonType:!0,position:[0],transitionEnd:function(t,e){},onShow:t=>{},callback:function(s,i){i=i[0],e.active=t.getTab(i),e.text=i.value,e.$store.dispatch("type",i.id)}})}},800)}},created(){this.$store.dispatch("projects",{lang:this.language,limit:this.show,offset:0}).then(()=>{this.projects=this.data,this.total=this.projects.length,this.itemsToShow=this.show})},mounted(){this.type=this.typeId,this.$t("home.projects.filter").forEach((t,e)=>{this.type===t.id&&(this.active=t.tab,this.text=t.text)}),this.render=!0,setTimeout(()=>{o.a.$emit("render",!0)},200),this.initialisePicker(),this.getCount(),this.permission=!0},watch:{language(t,e){e!==t&&(this.language=t)},itemsToShow(t,e){t!==e&&4<t&&this.xsmall&&(this.visible=!1)},mediumCompare(t,e){},small(t,e){e!==t&&(t?(this.render=!0,setTimeout(()=>{o.a.$emit("render",!0)},500)):(this.render=!1,o.a.$emit("render",!1)))},projects(t,e){t!==e&&(this.total=t.length)},active(t,e){t!==e&&(this.render=!0,setTimeout(()=>{o.a.$emit("render",!0)},1e3))},toShow(t,e){t!==e&&(this.itemsToShow=t)},xsmall(t,e){t!==e&&(t?(setTimeout(()=>{this.permission=!0},300),this.initialisePicker()):this.permission=!1)},medium(t,e){}}},l=s(11);l=Object(l.a)(r,i,[],!1,null,"b2b61464",null);e.default=l.exports}}]);