(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{167:function(t,a,e){"use strict";e.r(a);var s=e(1),r=e(6),i={name:"productSidebar",props:["lang","page"],components:{InfiniteLoading:()=>e.e(32).then(e.t.bind(null,415,7))},data:()=>({active:"",sortBy:"",sortMode:"descending",products:[],dropdown:!1,text:"",itemsToShow:2,show:2,pageOffset:0,infiniteId:+new Date,total:0,arrow:!0,categories:[{data:{name:"All"}}]}),mounted(){$("body").find("a").removeClass("v-tab--active"),this.sortBy=this.$t("sort.items")[0].name,this.initialisePicker(),this.arrow?$(".sidebar-submenu").slideDown():$(".sidebar-submenu").slideUp()},methods:{infiniteHandler(t){(this.xsmall||this.xlarge)&&setTimeout(()=>{this.$store.dispatch("products",{lang_id:this.lang||0,category_id:this.categoryId,length:this.show||0,offset:this.itemsToShow||0}).then(()=>{let a=this.data;a.length?(this.itemsToShow+=this.show,this.pageOffset+=1,a.forEach(t=>{this.products.push(t)}),t.loaded()):t.complete()})},800)},getProducts(){this.$store.dispatch("categoryByUrl",{lang_id:this.lang,url:this.page}).then(()=>{var t=this.categoryId;t&&(this.$store.dispatch("products",{lang_id:this.lang,category_id:t}).then(()=>{this.products=this.$store.getters.getProducts}),axios.get("/get-total",{params:{lang:this.lang,type:"products",categoryId:this.categoryId}}).then(t=>{this.total=t.data}))})},slideUp(t){this.$route.path.includes(t)&&(this.arrow=this.arrow?this.arrow=!1:this.arrow=!0,this.arrow?$(".sidebar-submenu").slideDown():$(".sidebar-submenu").slideUp())},childrenActive(t){return 0<=t.findIndex(t=>t.url===this.page)},childActive(t){if(t.children)return t.children.filter(a=>a.parent_id===t.id&&this.page===a.url)},sortList(t){let a=[];return t.forEach((t,e)=>{a.push(t.label)}),a},sort(){this.products=this.products.sort(this.compare)},compare(t,a){var e=this.sortBy;return"ascending"===this.sortMode?"name"===e?t.translates.name<a.translates.name?-1:t.translates.name>a.translates.name?1:0:"date"===e?Date.parse(t.created_at)<Date.parse(a.created_at)?-1:Date.parse(t.created_at)>Date.parse(a.created_at)?1:0:"price"===e?parseFloat(t[e])<parseFloat(a[e])?-1:parseFloat(t[e])>parseFloat(a[e])?1:0:t[e]<a[e]?-1:t[e]>a[e]?1:0:"name"===e?t.translates.name>a.translates.name?-1:t.translates.name<a.translates.name?1:0:"date"===e?Date.parse(t.created_at)>Date.parse(a.created_at)?-1:Date.parse(t.created_at)<Date.parse(a.created_at)?1:0:"price"===e?parseFloat(t[e])>parseFloat(a[e])?-1:parseFloat(t[e])<parseFloat(a[e])?1:0:t[e]>a[e]?-1:t[e]<a[e]?1:0},activateDropdown(){this.xsmall?this.initialisePicker():this.dropdown=!this.dropdown},fetchList(t){let a=[];for(var e in t)t[e].name&&a.push({id:e,value:t[e].label});return a},getTab(t){var a,e=this.items;for(a in e)if(e[a].label===t.value)return e[a].name},getLabel(t){var a,e=this.items;for(a in e)if(e[a].label===t)return e[a].label},initialisePicker(){setTimeout(()=>{if(document.querySelector("#trigger10")){let t=this,a=this;new MobileSelect({trigger:"#trigger10",title:"",wheels:[{data:this.fetchList(this.items)}],cancelBtnText:this.$t("cancel"),ensureBtnText:this.$t("select"),jsonType:!0,position:[0],transitionEnd:function(t,a){},onShow:t=>{},callback:function(e,s){s=s[0],a.sortBy=t.getTab(s),a.sortBy!==t.getTab(s)||"ascending"===a.sortMode?a.sortMode="descending":a.sortMode="ascending",a.active=t.getTab(s),a.text=s.value}})}},800)},isActiveCategory(){var t=this.sortBy,a=this.items;for(let e=0;e<a.length;e++)if(a[e].name===t)return a[e].label;return a[0].label},selectSort(t){this.sortBy!==$(t.target).attr("data-id")?(this.sortBy=$(t.target).attr("data-id"),this.sortMode="descending"===this.sortMode?"ascending":"descending"):this.sortMode="ascending"===this.sortMode?"descending":"ascending",this.dropdown=!1}},computed:{items(){return this.$t("sort.items")},categoryId(){return this.$store.getters.getCategoryByUrl.id},windowWidth:()=>s.a.data.windowCompare,largeCompare:()=>s.a.data.largeCompare,medium:()=>s.a.data.medium,mediumCompare:()=>s.a.data.mediumCompare,xsmall:()=>s.a.data.xsmall,xlarge:()=>s.a.data.xlarge,large:()=>s.a.data.large,small:()=>s.a.data.small,data(){return this.$store.getters.getProducts}},created(){var t="en"===this.$router.currentRoute.params.locale?1:"ru"===this.$router.currentRoute.params.locale?3:2;this.$store.dispatch("categories",{lang_id:t}).then(()=>{this.$store.getters.getCategories.forEach((t,a)=>{t.parent_id||this.categories.push(t)})}),this.getProducts()},watch:{$route(t,a){this.products=[],this.getProducts(),this.initialisePicker(),t.path!==a.path&&(this.arrow=!1,t.path.includes("products")&&!this.mediumCompare?setTimeout(()=>{0!==window.pageYOffset?(r.a.$emit("position","fixed"),r.a.$emit("color","light"),r.a.$emit("sticky",!0)):(r.a.$emit("position","relative"),r.a.$emit("color","light"),r.a.$emit("sticky",!1))},100):(r.a.$emit("position","relative"),r.a.$emit("color","light"),r.a.$emit("sticky",!1)))},sortBy(t,a){a!==t&&this.sort()},sortMode(t,a){a!==t&&this.sort()},xsmall(t,a){t!==a&&t&&this.initialisePicker()}}},o=e(10),l=e(11),n=e.n(l);l=e(198),i=Object(o.a)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-app",[e("div",{staticClass:"sidebar-width d-flex"},[t.windowWidth?e("ul",{staticClass:"nav nav-pills"},[e("h4",{staticClass:"catalog"},[t._v(t._s(t.$t("catalog")))]),t._v(" "),t._l(t.categories,(function(a,s){return a.url&&!a.parent_id&&"All"!==a.data.name?e("li",{key:"category-"+s,class:[a.url&&a.url===t.page?"active":"",t.childrenActive(a.children)?"semi-active":""]},[e("router-link",{key:s,attrs:{to:{name:"productsCategory",params:{category:a.url,locale:t.$route.params.locale,savedPosition:!0}},"data-toggle":"pill"},nativeOn:{click:function(e){return t.slideUp(a.url)}}},[e("span",{staticClass:"catalog-icon"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.image,expression:"category.image"}],staticClass:"sidebar-category-img",attrs:{alt:""}})]),t._v("\n\n                    "+t._s(a.data.name)+"\n                    "),e("i",{class:["arrow",a.url===t.page&&t.arrow||t.childrenActive(a.children)&&t.arrow?"up":"right"]})]),t._v(" "),a.url===t.page||t.childrenActive(a.children)?e("div",{staticClass:"sidebar-submenu"},[e("ul",t._l(a.children,(function(a){return a.url?e("li",{class:a.url&&a.url===t.page?"active":""},[e("router-link",{attrs:{to:{name:"productsCategory",params:{category:a.url,locale:t.$route.params.locale,savedPosition:!0}},"data-toggle":"pill"},on:{click:function(t){this.page,a.url}}},[t._v("\n                                "+t._s(a.data.name)+"\n                            ")])],1):t._e()})),0)]):t._e()],1):e("li",{class:void 0===t.page?"active":""},[e("router-link",{attrs:{to:{name:"products",params:{locale:t.$route.params.locale,savedPosition:!0}},"data-toggle":"pill"}},[e("span",{staticClass:"catalog-icon"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/components/products/all.png",expression:"'/assets/components/products/all.png'"}],staticClass:"sidebar-category-img",attrs:{alt:""}})]),t._v("\n                    "+t._s(t.$t("products.categories.all"))+"\n                ")])],1)}))],2):t._e(),t._v(" "),e("div",{staticClass:"tab-content"},[t.page?e("div",{staticClass:"dropdown-categories",class:[!t.xsmall&&t.products.length<=0?"position-absolute mb-0":""]},[!t.xsmall&&t.products.length<=0?e("button",{staticClass:"v-select-dropdown",class:[t.dropdown?"collapse":"collapsed",t.products.length<=0?"opacity-0":""],attrs:{type:"submit",disabled:""},on:{click:function(a){return a.preventDefault(),t.activateDropdown(a)}}},[t._v("\n                    "+t._s(t.isActiveCategory())+"\n                    "),t.dropdown?e("i",{staticClass:"arrow up"}):e("i",{staticClass:"arrow down"})]):!t.xsmall&&0<t.products.length?e("button",{staticClass:"v-select-dropdown",class:[t.dropdown?"collapse":"collapsed"],attrs:{type:"submit"},on:{click:function(a){return a.preventDefault(),t.activateDropdown(a)}}},[t._v("\n                    "+t._s(t.isActiveCategory())+"\n                    "),t.dropdown?e("i",{staticClass:"arrow up"}):e("i",{staticClass:"arrow down"})]):t._e(),t._v(" "),t.xsmall&&0<t.products.length?e("ul",[e("li",{staticClass:"nav-item dropdown picker-mobile"},[e("a",{staticClass:"nav-link dropdown-toggle",attrs:{id:"trigger10","data-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"}},[t._v(t._s(t.text||t.items[0].label))])])]):t._e(),t._v(" "),t.dropdown?e("ul",{staticClass:"position-absolute bg-white category-dropdown list-unstyled"},t._l(t.items,(function(a){return e("li",[e("p",{staticClass:"parent",attrs:{"data-id":a.name},on:{click:function(a){return t.selectSort(a)}}},[t._v("\n                            "+t._s(a.label)+"\n                        ")])])})),0):t._e()]):t._e(),t._v(" "),e("transition",{attrs:{name:"fade"}},[void 0===t.page?e("div",{class:["tab-pane fade out",void 0===t.page?"active show":""],attrs:{id:"home"}},[e("div",{staticClass:"d-grid product-categories"},t._l(t.categories,(function(a){return a.url&&!a.parent_id?e("router-link",{key:a.data.id,staticClass:"card d-flex flex-column align-items-start",attrs:{to:{name:"productsCategory",params:{category:a.url,locale:t.$route.params.locale,savedPosition:!t.mediumCompare}}}},[e("span",{staticClass:"card-img-container"},[e("img",{staticClass:"card-img-top",attrs:{src:a.image,alt:""}})]),t._v(" "),e("div",{staticClass:"card-title",class:[17<a.data.name.length?"card-product-mobile":""]},[e("h4",[t._v(t._s(a.data.name))])]),t._v(" "),e("span",[e("img",{attrs:{src:"/assets/components/products/arrow-long.png"}})])]):t._e()})),1)]):t._e()]),t._v(" "),t._l(t.categories,(function(a){return a.url&&a.url===t.page?e("div",{class:["tab-pane fade out",t.page===a.url?"active show":""],attrs:{id:a.url}},[e("transition",{attrs:{name:"fade"}},[t.xlarge&&0<a.children.length?e("div",{key:"subcats",staticClass:"d-grid product-categories"},t._l(a.children,(function(a){return a.url?e("router-link",{key:a.data.id,staticClass:"card d-flex flex-column align-items-start",attrs:{to:{name:"productsCategory",params:{category:a.url,locale:t.$route.params.locale,savedPosition:!t.mediumCompare}}}},[e("span",{staticClass:"card-img-container"},[e("img",{staticClass:"card-img-top",attrs:{src:a.image,alt:""}})]),t._v(" "),e("div",{staticClass:"card-title"},[e("h4",[t._v(t._s(a.data.name))])]),t._v(" "),e("span",[e("img",{attrs:{src:"/assets/components/products/arrow-long.png"}})])]):t._e()})),1):e("div",{key:"catprods",staticClass:"d-grid product-categories brands"},t._l(t.products,(function(a,s){return a.translates?e("router-link",{key:s,staticClass:"card d-flex flex-column",class:["card p-0"],attrs:{to:{name:"product",params:{id:a.id,locale:t.$route.params.locale}}}},[e("img",{staticClass:"card-img-top",attrs:{src:a.image||"",alt:""}}),t._v(" "),e("div",{staticClass:"card-body border-bottom"},[e("div",{staticClass:"d-flex justify-content-between"},[e("div",{staticClass:"card-body-title"},[e("p",{staticClass:"text-dark product-title"},[t._v(t._s(a.translates.name))]),t._v(" "),e("p",{staticClass:"product-brand align-items-center"},[e("img",{attrs:{src:"/assets/icons/star-grey.png"}}),t._v(t._s(a.brand)+"\n                                        ")])]),t._v(" "),t.largeCompare?t._e():e("div",{staticClass:"card-product-brand-logo d-flex"},[e("img",{attrs:{src:a.brand_logo,alt:a.brand}})])]),t._v(" "),e("div",{staticClass:"card-price",class:[t.largeCompare?"card-price-mobile":""]},[e("h4",{staticClass:"roboto text-dark"},[t._v(t._s(a.price)+" EUR")]),t._v(" "),t.largeCompare?e("div",{staticClass:"card-product-brand-logo d-flex"},[e("img",{attrs:{src:a.brand_logo,alt:a.brand}})]):t._e()])]),t._v(" "),e("router-link",{staticClass:"btn-product more align-items-center d-flex",attrs:{to:{name:"product",params:{id:a.id,locale:t.$route.params.locale}}}},[e("span",[t._v(t._s(t.$t("goto")))]),e("i",{staticClass:"arrow right ml-4"})])],1):t._e()})),1)])],1):t.childActive(a)?t._l(t.childActive(a),(function(a){return e("div",[e("transition",{attrs:{name:"fade"}},[e("div",{staticClass:"test-products"},[e("div",{staticClass:"d-grid product-categories brands"},t._l(t.products,(function(a,s){return a.translates?e("router-link",{key:s,staticClass:"card d-flex flex-column",class:["card p-0"],attrs:{to:{name:"product",params:{id:a.id,locale:t.$route.params.locale}}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:""+(a.image||""),expression:"''+(product.image ? product.image : '')"}],staticClass:"card-img-top",attrs:{alt:""}}),t._v(" "),e("div",{staticClass:"card-body border-bottom"},[e("div",{staticClass:"d-flex justify-content-between"},[e("div",{staticClass:"card-body-title"},[e("p",{staticClass:"text-dark product-title"},[t._v(t._s(a.translates.name))]),t._v(" "),e("p",{staticClass:"product-brand align-items-center"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/icons/star-grey.png",expression:"'/assets/icons/star-grey.png'"}]}),t._v(t._s(a.brand)+"\n                                            ")])]),t._v(" "),t.largeCompare?t._e():e("div",{staticClass:"card-product-brand-logo d-flex"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.brand_logo,expression:"product.brand_logo"}],attrs:{alt:a.brand}})])]),t._v(" "),e("div",{staticClass:"card-price",class:[t.largeCompare?"card-price-mobile":""]},[e("h4",{staticClass:"roboto text-dark"},[t._v(t._s(a.price)+" EUR")]),t._v(" "),t.largeCompare?e("div",{staticClass:"card-product-brand-logo d-flex"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.brand_logo,expression:"product.brand_logo"}],attrs:{alt:a.brand}})]):t._e()])]),t._v(" "),e("router-link",{staticClass:"btn-product more align-items-center d-flex",attrs:{to:{name:"product",params:{id:a.id,locale:t.$route.params.locale}}}},[e("span",[t._v(t._s(t.$t("goto")))]),e("i",{staticClass:"arrow right ml-4"})])],1):t._e()})),1)])])],1)})):t._e()})),t._v(" "),t.products.length<t.total&&(t.xsmall||t.small||t.large)&&t.$route.path.includes("products")?e("infinite-loading",{staticClass:"col-7",attrs:{identifier:t.infiniteId},on:{infinite:t.infiniteHandler}},[e("div",{attrs:{slot:"spinner"},slot:"spinner"},[e("div",{staticClass:"m-auto loading-more"},[e("img",{attrs:{src:"/assets/icons/more.png"}})])]),t._v(" "),e("div",{attrs:{slot:"no-more"},slot:"no-more"}),t._v(" "),e("div",{attrs:{slot:"no-results"},slot:"no-results"})]):t._e()],2)])])}),[],!1,null,"38fc9dbb",null);a.default=i.exports,n()(i,{VApp:l.a})}}]);