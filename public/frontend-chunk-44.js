(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{170:function(t,a,e){"use strict";e.r(a);var s=e(202),r=e(1),i=e(7),o={name:"productSidebar",props:["lang","page"],components:{InfiniteLoading:()=>e.e(31).then(e.t.bind(null,416,7))},data:()=>({active:"",sortBy:"",sortMode:"descending",products:[],dropdown:!1,text:"",itemsToShow:2,show:2,pageOffset:0,infiniteId:+new Date,total:0,arrow:!0,categories:[{data:{name:"All"}}]}),mounted(){$("body").find("a").removeClass("v-tab--active"),this.sortBy=this.$t("sort.items")[0].name,this.initialisePicker(),this.arrow?$(".sidebar-submenu").slideDown():$(".sidebar-submenu").slideUp()},methods:{infiniteHandler(t){(this.xsmall||this.xlarge)&&setTimeout(()=>{this.$store.dispatch("products",{lang_id:this.lang||0,category_id:this.categoryId,length:this.show||0,offset:this.itemsToShow||0}).then(()=>{var a=this.data;a.length?(this.itemsToShow+=this.show,this.pageOffset+=1,a.forEach(t=>{this.products.push(t)}),t.loaded()):t.complete()})},800)},getProducts(){this.$store.dispatch("categoryByUrl",{lang_id:this.lang,url:this.page}).then(()=>{var t=this.categoryId;t&&(this.$store.dispatch("products",{lang_id:this.lang,category_id:t}).then(()=>{this.products=this.$store.getters.getProducts}),axios.get("/get-total",{params:{lang:this.lang,type:"products",categoryId:this.categoryId}}).then(t=>{this.total=t.data}))})},slideUp(t){this.$route.path.includes(t)&&(this.arrow=this.arrow?this.arrow=!1:this.arrow=!0,this.arrow?$(".sidebar-submenu").slideDown():$(".sidebar-submenu").slideUp())},childrenActive(t){return 0<=t.findIndex(t=>t.url===this.page)},childActive(t){if(t.children)return t.children.filter(a=>a.parent_id===t.id&&this.page===a.url)},sortList(t){let a=[];return t.forEach((t,e)=>{a.push(t.label)}),a},sort(){this.products=this.products.sort(this.compare)},compare(t,a){var e=this.sortBy;return"ascending"===this.sortMode?"name"===e?t.translates.name<a.translates.name?-1:t.translates.name>a.translates.name?1:0:"date"===e?Date.parse(t.created_at)<Date.parse(a.created_at)?-1:Date.parse(t.created_at)>Date.parse(a.created_at)?1:0:"price"===e?parseFloat(t[e])<parseFloat(a[e])?-1:parseFloat(t[e])>parseFloat(a[e])?1:0:t[e]<a[e]?-1:t[e]>a[e]?1:0:"name"===e?t.translates.name>a.translates.name?-1:t.translates.name<a.translates.name?1:0:"date"===e?Date.parse(t.created_at)>Date.parse(a.created_at)?-1:Date.parse(t.created_at)<Date.parse(a.created_at)?1:0:"price"===e?parseFloat(t[e])>parseFloat(a[e])?-1:parseFloat(t[e])<parseFloat(a[e])?1:0:t[e]>a[e]?-1:t[e]<a[e]?1:0},activateDropdown(){this.xsmall?this.initialisePicker():this.dropdown=!this.dropdown},fetchList(t){var a,e=[];for(a in t)t[a].name&&e.push({id:a,value:t[a].label});return e},getTab(t){var a,e=this.items;for(a in e)if(e[a].label===t.value)return e[a].name},getLabel(t){var a,e=this.items;for(a in e)if(e[a].label===t)return e[a].label},initialisePicker(){setTimeout(()=>{if(document.querySelector("#trigger10")){let t=this,a=this;new MobileSelect({trigger:"#trigger10",title:"",wheels:[{data:this.fetchList(this.items)}],cancelBtnText:this.$t("cancel"),ensureBtnText:this.$t("select"),jsonType:!0,position:[0],transitionEnd:function(t,a){},onShow:t=>{},callback:function(e,s){s=s[0],a.sortBy=t.getTab(s),a.sortBy!==t.getTab(s)||"ascending"===a.sortMode?a.sortMode="descending":a.sortMode="ascending",a.active=t.getTab(s),a.text=s.value}})}},800)},isActiveCategory(){var t=this.sortBy,a=this.items;for(let e=0;e<a.length;e++)if(a[e].name===t)return a[e].label;return a[0].label},selectSort(t){this.sortBy!==$(t.target).attr("data-id")?(this.sortBy=$(t.target).attr("data-id"),this.sortMode="descending"===this.sortMode?"ascending":"descending"):this.sortMode="ascending"===this.sortMode?"descending":"ascending",this.dropdown=!1}},computed:{items(){return this.$t("sort.items")},categoryId(){return this.$store.getters.getCategoryByUrl.id},windowWidth:()=>r.a.data.windowCompare,largeCompare:()=>r.a.data.largeCompare,medium:()=>r.a.data.medium,mediumCompare:()=>r.a.data.mediumCompare,xsmall:()=>r.a.data.xsmall,xlarge:()=>r.a.data.xlarge,large:()=>r.a.data.large,small:()=>r.a.data.small,data(){return this.$store.getters.getProducts}},created(){var t="en"===this.$router.currentRoute.params.locale?1:"ru"===this.$router.currentRoute.params.locale?3:2;this.$store.dispatch("categories",{lang_id:t}).then(()=>{this.$store.getters.getCategories.forEach((t,a)=>{t.parent_id||this.categories.push(t)})}),this.getProducts()},watch:{$route(t,a){this.products=[],this.getProducts(),this.initialisePicker(),t.path!==a.path&&(this.arrow=!1,t.path.includes("products")&&!this.mediumCompare?setTimeout(()=>{0!==window.pageYOffset?(i.a.$emit("position","fixed"),i.a.$emit("color","light"),i.a.$emit("sticky",!0)):(i.a.$emit("position","relative"),i.a.$emit("color","light"),i.a.$emit("sticky",!1))},100):(i.a.$emit("position","relative"),i.a.$emit("color","light"),i.a.$emit("sticky",!1)))},sortBy(t,a){a!==t&&this.sort()},sortMode(t,a){a!==t&&this.sort()},xsmall(t,a){t!==a&&t&&this.initialisePicker()}}},l=e(11);l=Object(l.a)(o,(function(){var t=this,a=t._self._c;return a(s.a,[a("div",{staticClass:"sidebar-width d-flex"},[t.windowWidth?a("ul",{staticClass:"nav nav-pills"},[a("h4",{staticClass:"catalog"},[t._v(t._s(t.$t("catalog")))]),t._v(" "),t._l(t.categories,(function(e,s){return e.url&&!e.parent_id&&"All"!==e.data.name?a("li",{key:"category-"+s,class:[e.url&&e.url===t.page?"active":"",t.childrenActive(e.children)?"semi-active":""]},[a("router-link",{key:s,attrs:{to:{name:"productsCategory",params:{category:e.url,locale:t.$route.params.locale,savedPosition:!0}},"data-toggle":"pill"},nativeOn:{click:function(a){return t.slideUp(e.url)}}},[a("span",{staticClass:"catalog-icon"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"category.image"}],staticClass:"sidebar-category-img",attrs:{alt:""}})]),t._v("\n\n                    "+t._s(e.data.name)+"\n                    "),a("i",{class:["arrow",e.url===t.page&&t.arrow||t.childrenActive(e.children)&&t.arrow?"up":"right"]})]),t._v(" "),e.url===t.page||t.childrenActive(e.children)?a("div",{staticClass:"sidebar-submenu"},[a("ul",t._l(e.children,(function(e){return e.url?a("li",{class:e.url&&e.url===t.page?"active":""},[a("router-link",{attrs:{to:{name:"productsCategory",params:{category:e.url,locale:t.$route.params.locale,savedPosition:!0}},"data-toggle":"pill"},on:{click:function(t){this.page,e.url}}},[t._v("\n                                "+t._s(e.data.name)+"\n                            ")])],1):t._e()})),0)]):t._e()],1):a("li",{class:void 0===t.page?"active":""},[a("router-link",{attrs:{to:{name:"products",params:{locale:t.$route.params.locale,savedPosition:!0}},"data-toggle":"pill"}},[a("span",{staticClass:"catalog-icon"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/components/products/all.png",expression:"'/assets/components/products/all.png'"}],staticClass:"sidebar-category-img",attrs:{alt:""}})]),t._v("\n                    "+t._s(t.$t("products.categories.all"))+"\n                ")])],1)}))],2):t._e(),t._v(" "),a("div",{staticClass:"tab-content"},[t.page?a("div",{staticClass:"dropdown-categories",class:[!t.xsmall&&t.products.length<=0?"position-absolute mb-0":""]},[!t.xsmall&&t.products.length<=0?a("button",{staticClass:"v-select-dropdown",class:[t.dropdown?"collapse":"collapsed",t.products.length<=0?"opacity-0":""],attrs:{type:"submit",disabled:""},on:{click:function(a){return a.preventDefault(),t.activateDropdown.apply(null,arguments)}}},[t._v("\n                    "+t._s(t.isActiveCategory())+"\n                    "),t.dropdown?a("i",{staticClass:"arrow up"}):a("i",{staticClass:"arrow down"})]):!t.xsmall&&0<t.products.length?a("button",{staticClass:"v-select-dropdown",class:[t.dropdown?"collapse":"collapsed"],attrs:{type:"submit"},on:{click:function(a){return a.preventDefault(),t.activateDropdown.apply(null,arguments)}}},[t._v("\n                    "+t._s(t.isActiveCategory())+"\n                    "),t.dropdown?a("i",{staticClass:"arrow up"}):a("i",{staticClass:"arrow down"})]):t._e(),t._v(" "),t.xsmall&&0<t.products.length?a("ul",[a("li",{staticClass:"nav-item dropdown picker-mobile"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{id:"trigger10","data-toggle":"dropdown",href:"#",role:"button","aria-haspopup":"true","aria-expanded":"false"}},[t._v(t._s(t.text||t.items[0].label))])])]):t._e(),t._v(" "),t.dropdown?a("ul",{staticClass:"position-absolute bg-white category-dropdown list-unstyled"},t._l(t.items,(function(e){return a("li",[a("p",{staticClass:"parent",attrs:{"data-id":e.name},on:{click:function(a){return t.selectSort(a)}}},[t._v("\n                            "+t._s(e.label)+"\n                        ")])])})),0):t._e()]):t._e(),t._v(" "),a("transition",{attrs:{name:"fade"}},[void 0===t.page?a("div",{class:["tab-pane fade out",void 0===t.page?"active show":""],attrs:{id:"home"}},[a("div",{staticClass:"d-grid product-categories"},t._l(t.categories,(function(e){return e.url&&!e.parent_id?a("router-link",{key:e.data.id,staticClass:"card d-flex flex-column align-items-start",attrs:{to:{name:"productsCategory",params:{category:e.url,locale:t.$route.params.locale,savedPosition:!t.mediumCompare}}}},[a("span",{staticClass:"card-img-container"},[a("img",{staticClass:"card-img-top",attrs:{src:e.image,alt:""}})]),t._v(" "),a("div",{staticClass:"card-title",class:[17<e.data.name.length?"card-product-mobile":""]},[a("h4",[t._v(t._s(e.data.name))])]),t._v(" "),a("span",[a("img",{attrs:{src:"/assets/components/products/arrow-long.png"}})])]):t._e()})),1)]):t._e()]),t._v(" "),t._l(t.categories,(function(e){return e.url&&e.url===t.page?a("div",{class:["tab-pane fade out",t.page===e.url?"active show":""],attrs:{id:e.url}},[a("transition",{attrs:{name:"fade"}},[t.xlarge&&0<e.children.length?a("div",{key:"subcats",staticClass:"d-grid product-categories"},t._l(e.children,(function(e){return e.url?a("router-link",{key:e.data.id,staticClass:"card d-flex flex-column align-items-start",attrs:{to:{name:"productsCategory",params:{category:e.url,locale:t.$route.params.locale,savedPosition:!t.mediumCompare}}}},[a("span",{staticClass:"card-img-container"},[a("img",{staticClass:"card-img-top",attrs:{src:e.image,alt:""}})]),t._v(" "),a("div",{staticClass:"card-title"},[a("h4",[t._v(t._s(e.data.name))])]),t._v(" "),a("span",[a("img",{attrs:{src:"/assets/components/products/arrow-long.png"}})])]):t._e()})),1):a("div",{key:"catprods",staticClass:"d-grid product-categories brands"},t._l(t.products,(function(e,s){return e.translates?a("router-link",{key:s,staticClass:"card d-flex flex-column",class:["card p-0"],attrs:{to:{name:"product",params:{id:e.id,locale:t.$route.params.locale}}}},[a("img",{staticClass:"card-img-top",attrs:{src:e.image||"",alt:""}}),t._v(" "),a("div",{staticClass:"card-body border-bottom"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"card-body-title"},[a("p",{staticClass:"text-dark product-title"},[t._v(t._s(e.translates.name))]),t._v(" "),a("p",{staticClass:"product-brand align-items-center"},[a("img",{attrs:{src:"/assets/icons/star-grey.png"}}),t._v(t._s(e.brand)+"\n                                        ")])]),t._v(" "),t.largeCompare?t._e():a("div",{staticClass:"card-product-brand-logo d-flex"},[a("img",{attrs:{src:e.brand_logo,alt:e.brand}})])]),t._v(" "),a("div",{staticClass:"card-price",class:[t.largeCompare?"card-price-mobile":""]},[a("h4",{staticClass:"roboto text-dark"},[t._v(t._s(e.price)+" EUR")]),t._v(" "),t.largeCompare?a("div",{staticClass:"card-product-brand-logo d-flex"},[a("img",{attrs:{src:e.brand_logo,alt:e.brand}})]):t._e()])]),t._v(" "),a("router-link",{staticClass:"btn-product more align-items-center d-flex",attrs:{to:{name:"product",params:{id:e.id,locale:t.$route.params.locale}}}},[a("span",[t._v(t._s(t.$t("goto")))]),a("i",{staticClass:"arrow right ml-4"})])],1):t._e()})),1)])],1):t.childActive(e)?t._l(t.childActive(e),(function(e){return a("div",[a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"test-products"},[a("div",{staticClass:"d-grid product-categories brands"},t._l(t.products,(function(e,s){return e.translates?a("router-link",{key:s,staticClass:"card d-flex flex-column",class:["card p-0"],attrs:{to:{name:"product",params:{id:e.id,locale:t.$route.params.locale}}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:""+(e.image||""),expression:"''+(product.image ? product.image : '')"}],staticClass:"card-img-top",attrs:{alt:""}}),t._v(" "),a("div",{staticClass:"card-body border-bottom"},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"card-body-title"},[a("p",{staticClass:"text-dark product-title"},[t._v(t._s(e.translates.name))]),t._v(" "),a("p",{staticClass:"product-brand align-items-center"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:"/assets/icons/star-grey.png",expression:"'/assets/icons/star-grey.png'"}]}),t._v(t._s(e.brand)+"\n                                            ")])]),t._v(" "),t.largeCompare?t._e():a("div",{staticClass:"card-product-brand-logo d-flex"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.brand_logo,expression:"product.brand_logo"}],attrs:{alt:e.brand}})])]),t._v(" "),a("div",{staticClass:"card-price",class:[t.largeCompare?"card-price-mobile":""]},[a("h4",{staticClass:"roboto text-dark"},[t._v(t._s(e.price)+" EUR")]),t._v(" "),t.largeCompare?a("div",{staticClass:"card-product-brand-logo d-flex"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.brand_logo,expression:"product.brand_logo"}],attrs:{alt:e.brand}})]):t._e()])]),t._v(" "),a("router-link",{staticClass:"btn-product more align-items-center d-flex",attrs:{to:{name:"product",params:{id:e.id,locale:t.$route.params.locale}}}},[a("span",[t._v(t._s(t.$t("goto")))]),a("i",{staticClass:"arrow right ml-4"})])],1):t._e()})),1)])])],1)})):t._e()})),t._v(" "),t.products.length<t.total&&(t.xsmall||t.small||t.large)&&t.$route.path.includes("products")?a("infinite-loading",{staticClass:"col-7",attrs:{identifier:t.infiniteId},on:{infinite:t.infiniteHandler}},[a("div",{attrs:{slot:"spinner"},slot:"spinner"},[a("div",{staticClass:"m-auto loading-more"},[a("img",{attrs:{src:"/assets/icons/more.png"}})])]),t._v(" "),a("div",{attrs:{slot:"no-more"},slot:"no-more"}),t._v(" "),a("div",{attrs:{slot:"no-results"},slot:"no-results"})]):t._e()],2)])])}),[],!1,null,"38fc9dbb",null);a.default=l.exports}}]);